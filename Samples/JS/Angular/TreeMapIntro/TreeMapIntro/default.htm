<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>TreeMap Introduction</title>

    <!-- ensure IE uses the latest version of IE (yes, yes...) -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Third Party -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css"/>

    <!-- Wijmo -->
    <script src="scripts/vendor/wijmo.min.js"></script>
    <script src="scripts/vendor/wijmo.input.min.js"></script>
    <script src="scripts/vendor/wijmo.chart.min.js"></script>
    <script src="scripts/vendor/wijmo.chart.hierarchical.min.js"></script>
    <script src="scripts/vendor/wijmo.angular.min.js"></script>

    <link rel="stylesheet" href="styles/vendor/wijmo.min.css" />

    <!-- app scripts and styles -->
    <script src="scripts/app.js"></script>
    <script src="scripts/directives/appDctv.js"></script>
    <script src="scripts/controllers/appCtrl.js"></script>
    <link href="styles/app.css" rel="stylesheet"/>
</head>
<body ng-app="app" ng-controller="appCtrl">
    <div class="header visible-xs visible-sm">
        <div class="container">
            <h1>
                TreeMap 101
            </h1>
        </div>
    </div>
    <div class="header hidden-xs hidden-sm">
        <div class="container">
            <img src="resources/wijmo5.png" />
            <h1>
                TreeMap 101
            </h1>
            <p>
                This page shows how to get started with Wijmo's TreeMap control.
            </p>
        </div>
    </div>
    <div class="container">

        <!-- getting started -->
        <h2 id="Start">
            Getting Started
        </h2>
        <p>
            Here are the steps for getting started with the TreeMap control in JavaScript applications:
        </p>
        <ol>
            <li>Add references to AngularJS, Wijmo, and Wijmo's AngularJS directives.</li>
            <li>
                Include the Wijmo 5 directives in the app module: <br />
                <code>var app = angular.module('app', ['wj']);</code>
            </li>
            <li>Add a controller to provide data and logic.</li>
            <li>Add a TreeMap to the page and bind it to the data.</li>
            <li>Add an appropriate CSS to customize the treemap's appearance.</li>
        </ol>
        <div class="row">
            <div class="col-md-6">
                <app-tab>
                    <app-tab-pane title="HTML">
                        <div class="pane-content">
&lt;html&gt;
&lt;head&gt;
    &lt;link rel="stylesheet" href="css/bootstrap.css"/&gt;
    &lt;link rel="stylesheet" href="css/wijmo.css"/&gt;
    &lt;link href="css/app.css" rel="stylesheet"/&gt;
    &lt;script src="scripts/angular.js"&gt;&lt;/script&gt;
    &lt;script src="scripts/wijmo.js"&gt;&lt;/script&gt;
    &lt;script src="scripts/wijmo.chart.js"&gt;&lt;/script&gt;
    &lt;script src="scripts/wijmo.chart.hierarchical.js"&gt;&lt;/script&gt;
    &lt;script src="scripts/wijmo.angular.js"&gt;&lt;/script&gt;
    &lt;script src="scripts/app.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body ng-app="app" ng-controller="appCtrl"&gt;

&lt;!-- this is the treemap --&gt;
&lt;wj-tree-map items-source="data" label-content="{name}" binding-name="bindingName" binding="sales"&gt;
&lt;/wj-tree-map&gt;

&lt;/body&gt;
&lt;/html&gt;
                        </div>
                    </app-tab-pane>
                    <app-tab-pane title="JS">
                        <div class="pane-content">
// declare app module
var app = angular.module('app', ['wj']);

// app controller provides data
app.controller('appCtrl', function appCtrl($scope) {
    function rand() {
        return Math.round(Math.random() * 100);
    }
    // generate some random data
    var categories = ['Beverages', 'Condiments', 'Confections', 'Dairy Products', 'Grains/Cereals', 'Meat/Poultry', 'Produce', 'Seafood'],
        subCategories = [['Soft drinks', 'Coffees', 'Teas', 'Beers', 'Ales'], ['Sweet and Savory sauces', 'Relishes', 'Spreads', 'Seasonings'],
            ['Desserts', 'Candies', 'Sweet breads'], ['Chesses'], ['Breads', 'Crackers', 'Pasta', 'Cereal'], ['Prepared meats'], ['Dried fruit', 'Bean curd'], ['Seaweed', 'Fish']];

    function getData() {
        var data = [];

        categories.forEach(function (c, idx) {
            var sub = subCategories[idx];
            sub.forEach(function (s) {
                data.push({
                    category: c,
                    subCategory: s,
                    sales: rand()
                });
            });
        });
        return data;
    }
    // add data array to scope
    $scope.data = getData();
});
                        </div>
                    </app-tab-pane>
                    <app-tab-pane title="CSS">
                        <div class="pane-content">
/* set default chart style */
.wj-treemap {
    height: 400px;
    background-color: white;
    box-shadow: 4px 4px 10px 0px rgba(50, 50, 50, 0.75);
    padding: 8px;
    margin-bottom: 12px;
}
                        </div>
                    </app-tab-pane>
                </app-tab>
            </div>
            <div class="col-md-6">
                <h4>Result (live):</h4>
                <wj-tree-map items-source="data" label-content="{name}" binding-name="bindingName" binding="sales">
                </wj-tree-map>
            </div>
        </div>

        <!-- Group CollectionView -->
        <h2 id="groupCollectionView">
            Group Collection
        </h2>
        <p>
            The sample shows how to use the TreeMap chart with Grouped CollectionView.
        </p>
        <div class="row">
            <div class="col-md-6">
                <app-tab>
                    <app-tab-pane title="HTML">
                        <div ng-non-bindable class="pane-content">
&lt;wj-tree-map items-source="groupData" label-content="{name}" binding-name="bindingName" binding="sales"&gt;
&lt;/wj-tree-map&gt;
                        </div>
                    </app-tab-pane>
                    <app-tab-pane title="JS">
                        <div class="pane-content">
function rand() {
    return Math.round(Math.random() * 100);
}
// generate some random data
var categories = ['Beverages', 'Condiments', 'Confections', 'Dairy Products', 'Grains/Cereals', 'Meat/Poultry', 'Produce', 'Seafood'],
    subCategories = [['Soft drinks', 'Coffees', 'Teas', 'Beers', 'Ales'], ['Sweet and Savory sauces', 'Relishes', 'Spreads', 'Seasonings'],
        ['Desserts', 'Candies', 'Sweet breads'], ['Chesses'], ['Breads', 'Crackers', 'Pasta', 'Cereal'], ['Prepared meats'], ['Dried fruit', 'Bean curd'], ['Seaweed', 'Fish']];

function getGroupCVData() {
    var data = [],
        len = 1000,
        catLen = categories.length,
        subCat, randomC, randomSC;

    for (var i = 0; i < len; i++) {
        randomC = Math.floor(Math.random() * catLen);
        subCat = subCategories[randomC];
        randomSC = Math.floor(Math.random() * subCat.length);

        data.push({
            category: categories[randomC],
            subCategory: subCat[randomSC],
            sales: rand()
        });
    }
    var cv = new wijmo.collections.CollectionView(data);


    cv.groupDescriptions.push(new wijmo.collections.PropertyGroupDescription('category'));
    cv.groupDescriptions.push(new wijmo.collections.PropertyGroupDescription('subCategory'));
    return cv;
}
// add data array to scope
$scope.groupData = getGroupCVData();
                        </div>
                    </app-tab-pane>
                </app-tab>
            </div>
            <div class="col-md-6">
                <h4>Result (live):</h4>
                <wj-tree-map items-source="groupData" label-content="{name}" binding-name="bindingName" binding="sales">
                </wj-tree-map>
            </div>
        </div>

        <!-- Type -->
        <h2 id="type">
            Type
        </h2>
        <p>
            The TreeMap chart control allow you to set <b>type</b> property to customize its layout and appearance:
        </p>
        <div class="row">
            <div class="col-md-6">
                <app-tab>
                    <app-tab-pane title="HTML">
                        <div class="pane-content">
&lt;wj-tree-map control="typeTM" items-source="data" label-content="{name}" binding-name="bindingName" binding="sales"&gt;
&lt;/wj-tree-map&gt;
&lt;wj-menu header=Type: &lt;b&gt;Squarified&lt;/b&gt;" item-clicked="typeChanged(s, e)"&gt;
    &lt;wj-menu-item value="'Squarified'"&gt;Squarified&lt;/wj-menu-item&gt;
    &lt;wj-menu-item value="'Horizontal'"&gt;Horizontal&lt;/wj-menu-item&gt;
    &lt;wj-menu-item value="'Vertical'"&gt;Vertical&lt;/wj-menu-item&gt;
&lt;/wj-menu&gt;
                        </div>
                    </app-tab-pane>
                    <app-tab-pane title="JS">
                        <div class="pane-content">
$scope.data = getData();
$scope.bindingName = ['category', 'subCategory'];

$scope.typeChanged = function (sender) {
    $scope.typeTM.type = wijmo.chart.hierarchical.TreeMapType[sender.selectedValue]
    sender.header = 'Type: <b>' + sender.selectedValue + '</b>';
};
                        </div>
                    </app-tab-pane>
                </app-tab>
            </div>
            <div class="col-md-6">
                <h4>Result (live):</h4>
                <wj-tree-map control="typeTM" items-source="data" label-content="{name}" binding-name="bindingName" binding="sales">
                </wj-tree-map>
                <wj-menu header="Type: <b>Squarified</b>"
                            item-clicked="typeChanged(s, e)">
                    <wj-menu-item value="'Squarified'">Squarified</wj-menu-item>
                    <wj-menu-item value="'Horizontal'">Horizontal</wj-menu-item>
                    <wj-menu-item value="'Vertical'">Vertical</wj-menu-item>
                </wj-menu>
            </div>
        </div>
        <!-- Max Depth -->
        <h2 id="maxDepth">
            Max Depth
        </h2>
        <p>
            The TreeMap chart control allow you to set <b>maxDepth</b> property to set the maximum number of node levels to show in the current view.
            Levels will be flattened into the current plane.
        </p>
        <div class="row">
            <div class="col-md-6">
                <app-tab>
                    <app-tab-pane title="HTML">
                        <div class="pane-content">
&lt;wj-tree-map control="maxDepthTM" max-depth="maxDepth" items-source="maxDepthData"
        label-content="{name}" binding-name="'type'" binding="sales" child-items-path="'items'"&gt;
&lt;/wj-tree-map&gt;
&lt;wj-input-number control="inputMaxDepth" value="maxDepth" min="0" max="4" step="1"&gt;
&lt;/wj-input-number&gt;
                        </div>
                    </app-tab-pane>
                    <app-tab-pane title="JS">
                        <div class="pane-content">
$scope.maxDepthData = getMaxDepthData();
$scope.inputMaxDepth = null;
$scope.maxDepthTM = null;
$scope.maxDepth = 2;

$scope.$watch('maxDepth', function () {
    var maxDepth = $scope.inputMaxDepth,
        val = $scope.maxDepth;
    if (maxDepth != null) {
        if (val < maxDepth.min || val > maxDepth.max) {
            return;
        }
        $scope.maxDepthTM.maxDepth = val;
    }
});
                        </div>
                    </app-tab-pane>
                </app-tab>
            </div>
            <div class="col-md-6">
                <h4>Result (live):</h4>
                <wj-tree-map control="maxDepthTM" max-depth="{{maxDepth}}" items-source="maxDepthData" 
                             label-content="{name}" binding-name="'type'" binding="sales" child-items-path="'items'">
                </wj-tree-map>
                <wj-input-number control="inputMaxDepth" value="maxDepth" min="0" max="4" step="1">
                </wj-input-number>
            </div>
        </div>
        <!-- theming -->
        <h2 id="Theming">
            Theming
        </h2>
        <p>
            The TreeMap chart control allow you to set <b>palette</b> property to customize the appearance.
        </p>
        <div class="row">
            <div class="col-md-6">
                <app-tab>
                    <app-tab-pane title="HTML">
                        <div class="pane-content">
&lt;wj-tree-map class="custom-treemap" items-source="data" label-content="{name}" binding-name="bindingName" binding="sales" palette="palette1"&gt;
&lt;/wj-tree-map&gt;
&lt;wj-tree-map class="custom-treemap" items-source="data" label-content="{name}" binding-name="bindingName" binding="sales" palette="palette2"&gt;
&lt;/wj-tree-map&gt;
                        </div>
                    </app-tab-pane>
                    <app-tab-pane title="JS">
                        <div class="pane-content">
$scope.data = getData();
$scope.bindingName = ['category', 'subCategory'];
$scope.palette1 = [{
    titleColor: '#00277d',
    maxColor: 'rgba(0,39,125,0.7)',
    minColor: 'rgba(168,187,230,0.7)'
}, {
    titleColor: '#7d1f00',
    maxColor: 'rgba(125,21,0,0.7)',
    minColor: 'rgba(230,183,168,0.7)'
}, {
    titleColor: '#007d27',
    maxColor: 'rgba(0,125,39,0.7)',
    minColor: 'rgba(168,230,188,0.7)'
}, {
    titleColor: '#7d003c',
    maxColor: 'rgba(125,0,60,0.7)',
    minColor: 'rgba(230,168,198,0.7)'
}, {
    titleColor: '#7d4300',
    maxColor: 'rgba(125,67,0,0.7)',
    minColor: 'rgba(230,201,168,0.7)'
}, {
    titleColor: '#51007d',
    maxColor: 'rgba(81,0,125,0.7)',
    minColor: 'rgba(209,170,230,0.7)'
}, {
    titleColor: '#7d7400',
    maxColor: 'rgba(125,116,0,0.7)',
    minColor: 'rgba(230,226,168,0.7)'
}, {
    titleColor: '#970000',
    maxColor: 'rgba(151,0,0,0.7)',
    minColor: 'rgba(230,169,169,0.7)'
}];
$scope.palette2 = ['#88bde6', '#fbb258', '#90cd97', '#f6aac9', '#bfa554', '#bc99c7', '#eddd46', '#f07e6e', '#8c8c8c'];
                        </div>
                    </app-tab-pane>
                    <app-tab-pane title="CSS">
                        <div class="pane-content">
.custom-treemap .wj-data-label {
    fill: #000;
}
                        </div>
                    </app-tab-pane>
                </app-tab>
            </div>
            <div class="col-md-6">
                <h4>Result (live):</h4>
                <wj-tree-map class="custom-treemap" items-source="data" label-content="{name}" binding-name="bindingName" binding="sales" palette="palette1">
                </wj-tree-map>
                <wj-tree-map class="custom-treemap" items-source="data" label-content="{name}" binding-name="bindingName" binding="sales" palette="palette2">
                </wj-tree-map>
            </div>
        </div>

    </div>

    <!-- Google analytics -->
    
    <script src="http://cdn.wijmo.com/wijmo.sample.toolbar.js" type="text/javascript"></script>
</body>
</html>
